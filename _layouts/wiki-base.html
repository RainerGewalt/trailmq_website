<!DOCTYPE html>
<html lang="en">
<head>
  {% include head.html %}
  
  <!-- Wiki-specific styles -->
  <link rel="stylesheet" href="{{ '/assets/css/wiki.css' | relative_url }}" />
  
  <!-- Wiki SEO enhancements -->
  {% if page.layout == 'wiki-article' %}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "TechArticle",
    "headline": "{{ page.title }}",
    "description": "{{ page.description | default: page.excerpt | strip_html | truncate: 160 }}",
    "url": "{{ page.url | absolute_url }}",
    "datePublished": "{{ page.date | date_to_xmlschema }}",
    "dateModified": "{{ page.last_modified | default: page.date | date_to_xmlschema }}",
    "author": {
      "@type": "Organization",
      "name": "TrailMQ"
    },
    "publisher": {
      "@type": "Organization",
      "name": "TrailMQ",
      "url": "{{ site.url }}"
    },
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "{{ page.url | absolute_url }}"
    }
    {% if page.tags %},
    "keywords": "{{ page.tags | join: ', ' }}"
    {% endif %}
  }
  </script>
  {% endif %}
  
  <!-- Breadcrumb Schema -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "{{ site.url }}"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Wiki",
        "item": "{{ '/wiki/' | absolute_url }}"
      }
      {% if page.category %}
      ,{
        "@type": "ListItem",
        "position": 3,
        "name": "{{ page.category }}",
        "item": "{{ '/wiki/category/' | append: page.category | slugify | append: '/' | absolute_url }}"
      }
      {% endif %}
      {% if page.title and page.layout == 'wiki-article' %}
      ,{
        "@type": "ListItem",
        "position": {% if page.category %}4{% else %}3{% endif %},
        "name": "{{ page.title }}",
        "item": "{{ page.url | absolute_url }}"
      }
      {% endif %}
    ]
  }
  </script>
</head>
<body>
  {% include wiki/header.html %}
  
  <div class="wiki-layout">
    {% include wiki/sidebar.html %}
    
    <main class="wiki-main">
      {{ content }}
    </main>
  </div>
  
  <!-- Mobile Sidebar Toggle -->
  <button class="wiki-mobile-toggle" id="wiki-mobile-toggle" aria-label="Toggle navigation">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M3 12h18M3 6h18M3 18h18"/>
    </svg>
  </button>
  
  <!-- Overlay for mobile -->
  <div class="wiki-overlay" id="wiki-overlay"></div>
  
  {% include footer.html %}
  
  <!-- Wiki JavaScript -->
  <script src="{{ '/assets/js/wiki.js' | relative_url }}" defer></script>
</body>
</html>
